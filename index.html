<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTFâ€‘8">
  <title>Wrapsa Lumpia</title>
  <style>
    body { fontâ€‘family: Arial; background: #fff3e0; textâ€‘align: center; padding: 20px; }
    button { padding: 10px; margin: 5px; background: orange; color: white; border: none; cursor: pointer; }
    .hidden { display: none; }
    .orderâ€‘card { background: white; margin: 10px auto; padding: 10px; width: 300px; borderâ€‘radius: 5px; }
  </style>
</head>
<body>

<h1>ðŸŒ¯ Wrapsa</h1>

<div>
  <button onclick="showOrder()">Order Now</button>
  <button onclick="showKitchen()">Kitchen View</button>
</div>

<section id="order-section">
  <h2>Order Now</h2>
  <input id="name" placeholder="Your Name"><br><br>
  <select id="item">
    <option>Classic Lumpia</option>
    <option>Cheese Lumpia</option>
    <option>Spicy Lumpia</option>
  </select><br><br>
  <button onclick="placeOrder()">Place Order</button>
</section>

<section id="kitchen-section" class="hidden">
  <h2>Kitchen View</h2>
  <div id="pin-section">
    <input id="pin" placeholder="Enter PIN">
    <button onclick="unlockKitchen()">Unlock</button>
  </div>
  <div id="orders-list" class="hidden"></div>
</section>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-appâ€‘compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebaseâ€‘databaseâ€‘compat.js"></script>

<script>
  // ðŸ”¥ YOUR firebaseConfig goes here (from Firebase console)
  const firebaseConfig = {
  apiKey: "AIzaSyBWFky3ws2qePzzLW0xKkfA7q3PG-Sr1Z0",
  authDomain: "wrapsa-81a32.firebaseapp.com",
  projectId: "wrapsa-81a32",
  storageBucket: "wrapsa-81a32.firebasestorage.app",
  messagingSenderId: "181271317560",
  appId: "1:181271317560:web:f86a4e0dab265a65056acd",
  measurementId: "G-SKG0VF8S7B"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const PIN = "123PEEPS";

  function showOrder() {
    document.getElementById("order-section").classList.remove("hidden");
    document.getElementById("kitchen-section").classList.add("hidden");
  }

  function showKitchen() {
    document.getElementById("order-section").classList.add("hidden");
    document.getElementById("kitchen-section").classList.remove("hidden");
  }

  function placeOrder() {
    const name = document.getElementById("name").value.trim();
    const item = document.getElementById("item").value;
    if (!name) { alert("Enter your name"); return; }

    const newOrderRef = db.ref("orders").push();
    newOrderRef.set({
      id: newOrderRef.key,
      name,
      item,
      status: "Ordered"
    });

    alert("Order placed! You will be notified.");
    document.getElementById("name").value = "";
  }

  function unlockKitchen() {
    const pinValue = document.getElementById("pin").value;
    if (pinValue === PIN) {
      document.getElementById("pin-section").classList.add("hidden");
      document.getElementById("orders-list").classList.remove("hidden");
      listenForOrders();
    } else {
      alert("Wrong PIN");
    }
  }

  function listenForOrders() {
    db.ref("orders").on("value", snapshot => {
      const ordersDiv = document.getElementById("orders-list");
      ordersDiv.innerHTML = "";
      snapshot.forEach(childSnap => {
        const o = childSnap.val();
        ordersDiv.innerHTML += `
          <div class="orderâ€‘card">
            <b>${o.name}</b><br>${o.item}<br>Status: ${o.status}<br>
            <button onclick="updateStatus('${o.id}','Preparing')">Preparing</button>
            <button onclick="updateStatus('${o.id}','Ready')">Ready</button>
            <button onclick="updateStatus('${o.id}','Complete')">Complete</button>
          </div>`;
      });
    });
  }

  function updateStatus(id, status) {
    const orderRef = db.ref("orders/" + id);
    if (status === "Complete") {
      orderRef.remove();
      alert("Order completed!");
    } else {
      orderRef.update({ status });
      alert("Order is now " + status);
    }
  }
</script>

</body>
</html>
